# 비동기적으로 실행하기

이어지는 작업들은 모두 현재 스레드에서 실행한다
(문제는.. 이어지는 작업을 스레드 제한없이 실행시키는 것이 더 효율적이다)

```csharp
await
{
    int i = 0;

    // 1. 실행 중 대기 상태가 되면 await 스코프에게 기다리도록 등록하고 다음 구문으로 넘어간다
    async
    {
        // 다운로드가 완료될때까지 대기
        DownloadAsync("http://google.com");

        i++; // 같은 스레드에서 실행되므로 lock이 필요 없다

        // 다운로드가 끝났다면 "원래 스레드"로 돌아와서 print
        print("Download Completed $i");

        // 다른 작업을 걸어놓고 완료될때까지 대기
        OtherAsync1();

        // 원래 스레드
        // 완료
    } 
    
    // 2. 실행 중 대기 상태가 되면 await 스코프에게 기다리도록 등록하고 다음 구문으로 넘어간다
    async
    {
        // 다운로드가 완료될때까지 대기, 스레드풀에 들어가거나 동시 실행
        DownloadAsync("http://duckduckgo.com");

        i++; // 같은 스레드에서 실행되므로 lock이 필요 없다

        // 다운로드가 끝났다면 "원래 스레드"로 돌아와서 print
        print("Download Completed $i");

        // 다른 작업을 걸어놓고 완료될때까지 대기
        OtherAsync2();

        // 원래 스레드
        // 완료
    } 

} // 둘다 완료 되면, 다음 구문을 "원래 스레드"에서 실행한다

```